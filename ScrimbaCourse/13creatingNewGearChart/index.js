var data = [{
        "id": "1",
        "itinerario": "Ref.Mal.Floriano/Eldorado/Serrano",
        "carro": "402",
        "reserva": "605",
        "saida_planejada": "09:05",
        "saida": "09:09",
        "diferenca": "-6163:5:23:56",
        "entrada": "9:44",
        "tempo_viagem": "35m",
        "tempo_planejado1": "40m",
        "tempo_parado1": "2m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "2",
        "itinerario": "Serrano/Andreazza/Marechal Floriano",
        "carro": "402",
        "reserva": "605",
        "saida_planejada": "09:45",
        "saida": "09:46",
        "diferenca": "-6163:5:23:59",
        "entrada": "10:19",
        "tempo_viagem": "33m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "2m",
        "tempo_volta": "68m",
        "tempo_planejado2": "75m",
        "tempo_parado2": "7m",
        "sentido": 0
    },
    {
        "id": "3",
        "itinerario": "Ref.Mal.Floriano/Eldorado/Serrano",
        "carro": "402",
        "reserva": "605",
        "saida_planejada": "10:20",
        "saida": "10:21",
        "diferenca": "-6163:5:23:59",
        "entrada": "10:57",
        "tempo_viagem": "36m",
        "tempo_planejado1": "40m",
        "tempo_parado1": "3m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "4",
        "itinerario": "Serrano/Andreazza/Marechal Floriano",
        "carro": "402",
        "reserva": "605",
        "saida_planejada": "11:00",
        "saida": "11:00",
        "diferenca": "-6163:6",
        "entrada": "11:32",
        "tempo_viagem": "32m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "2m",
        "tempo_volta": "68m",
        "tempo_planejado2": "75m",
        "tempo_parado2": "7m",
        "sentido": 0
    },
    {
        "id": "5",
        "itinerario": "Ref.Mal.Floriano/Trav.Leopoldina/Serrano",
        "carro": "402",
        "reserva": "605",
        "saida_planejada": "11:35",
        "saida": "11:34",
        "diferenca": "-6163:6:0:01",
        "entrada": "12:04",
        "tempo_viagem": "30m",
        "tempo_planejado1": "45m",
        "tempo_parado1": "16m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "6",
        "itinerario": "Serrano/Eldorado/Mal.Floriano",
        "carro": "402",
        "reserva": "605",
        "saida_planejada": "12:20",
        "saida": "12:20",
        "diferenca": "-6163:6",
        "entrada": "12:54",
        "tempo_viagem": "34m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "1m",
        "tempo_volta": "64m",
        "tempo_planejado2": "80m",
        "tempo_parado2": "16m",
        "sentido": 0
    },
    {
        "id": "7",
        "itinerario": "Ref.Mal.Floriano/Eldorado/Serrano",
        "carro": "402",
        "reserva": "605",
        "saida_planejada": "12:55",
        "saida": "12:55",
        "diferenca": "-6163:6",
        "entrada": "13:25",
        "tempo_viagem": "30m",
        "tempo_planejado1": "40m",
        "tempo_parado1": "11m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "8",
        "itinerario": "Serrano/Andreazza/Marechal Floriano",
        "carro": "402",
        "reserva": "605",
        "saida_planejada": "13:35",
        "saida": "13:36",
        "diferenca": "-6163:5:23:59",
        "entrada": "14:11",
        "tempo_viagem": "35m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "2m",
        "tempo_volta": "65m",
        "tempo_planejado2": "75m",
        "tempo_parado2": "10m",
        "sentido": 0
    },
    {
        "id": "9",
        "itinerario": "Ref.Mal.Floriano/Eldorado/Serrano",
        "carro": "402",
        "reserva": "605",
        "saida_planejada": "14:10",
        "saida": "14:13",
        "diferenca": "-6163:5:23:57",
        "entrada": "14:47",
        "tempo_viagem": "34m",
        "tempo_planejado1": "40m",
        "tempo_parado1": "4m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "10",
        "itinerario": "Serrano/Andreazza/Marechal Floriano",
        "carro": "402",
        "reserva": "605",
        "saida_planejada": "14:50",
        "saida": "14:51",
        "diferenca": "-6163:5:23:59",
        "entrada": "15:29",
        "tempo_viagem": "38m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "2m",
        "tempo_volta": "72m",
        "tempo_planejado2": "75m",
        "tempo_parado2": "3m",
        "sentido": 0
    },
    {
        "id": "11",
        "itinerario": "Ref.Mal.Floriano/Eldorado/Serrano",
        "carro": "402",
        "reserva": "605",
        "saida_planejada": "15:25",
        "saida": "15:31",
        "diferenca": "-6163:5:23:54",
        "entrada": "16:09",
        "tempo_viagem": "38m",
        "tempo_planejado1": "45m",
        "tempo_parado1": "3m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "12",
        "itinerario": "Serrano/Andreazza/Marechal Floriano",
        "carro": "402",
        "reserva": "605",
        "saida_planejada": "16:10",
        "saida": "16:12",
        "diferenca": "-6163:5:23:58",
        "entrada": "16:48",
        "tempo_viagem": "36m",
        "tempo_planejado1": "1h 25m",
        "tempo_parado1": "-",
        "tempo_volta": "74m",
        "tempo_planejado2": "2h 10m",
        "tempo_parado2": "0h 56m",
        "sentido": 0
    },
    {
        "id": "13",
        "itinerario": "Viagem de deslocamento",
        "carro": "402",
        "reserva": "",
        "saida_planejada": "17:35",
        "saida": "-",
        "diferenca": "-",
        "entrada": "-",
        "tempo_viagem": "-",
        "tempo_planejado1": "25m",
        "tempo_parado1": "-",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "14",
        "itinerario": "Ref.Mal.Floriano/Trav.Leopoldina/Serrano",
        "carro": "402",
        "reserva": "",
        "saida_planejada": "18:00",
        "saida": "-",
        "diferenca": "-",
        "entrada": "-",
        "tempo_viagem": "-",
        "tempo_planejado1": "45m",
        "tempo_parado1": "-",
        "tempo_volta": "-",
        "tempo_planejado2": "70m",
        "tempo_parado2": "-",
        "sentido": 0
    },
    {
        "id": "15",
        "itinerario": "Serrano/Eldorado/Mal.Floriano",
        "carro": "402",
        "reserva": "",
        "saida_planejada": "18:45",
        "saida": "-",
        "diferenca": "-",
        "entrada": "-",
        "tempo_viagem": "-",
        "tempo_planejado1": "2h 25m",
        "tempo_parado1": "-",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "16",
        "itinerario": "Ref.Marechal/Travessão/Serrano/Eldorado/Iracema",
        "carro": "402",
        "reserva": "",
        "saida_planejada": "21:10",
        "saida": "21:11",
        "diferenca": "-6163:5:23:59",
        "entrada": "21:59",
        "tempo_viagem": "48m",
        "tempo_planejado1": "1h 30m",
        "tempo_parado1": "42m",
        "tempo_volta": "-",
        "tempo_planejado2": "3h 55m",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "17",
        "itinerario": "Ref.Marechal/Travessão/Serrano/Eldorado/Iracema",
        "carro": "402",
        "reserva": "",
        "saida_planejada": "22:40",
        "saida": "22:41",
        "diferenca": "-6163:5:23:59",
        "entrada": "23:14",
        "tempo_viagem": "33m",
        "tempo_planejado1": "-3h 10m",
        "tempo_parado1": "-3h 55m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "18",
        "itinerario": "Viagem de Deslocamento entre Terminais",
        "carro": "432",
        "reserva": "",
        "saida_planejada": "19:30",
        "saida": "19:19",
        "diferenca": "-6163:6:0:11",
        "entrada": "19:42",
        "tempo_viagem": "23m",
        "tempo_planejado1": "10m",
        "tempo_parado1": "3m",
        "tempo_volta": "56m",
        "tempo_planejado2": "-3h 0m",
        "tempo_parado2": "-3h 56m",
        "sentido": 1
    },
    {
        "id": "19",
        "itinerario": "Ref.Mal.Floriano/Trav.Leopoldina/Serrano",
        "carro": "432",
        "reserva": "",
        "saida_planejada": "19:40",
        "saida": "19:45",
        "diferenca": "-6163:5:23:55",
        "entrada": "20:20",
        "tempo_viagem": "35m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "1m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "20",
        "itinerario": "Serrano/Eldorado/Mal.Floriano",
        "carro": "432",
        "reserva": "",
        "saida_planejada": "20:15",
        "saida": "20:21",
        "diferenca": "-6163:5:23:54",
        "entrada": "21:00",
        "tempo_viagem": "39m",
        "tempo_planejado1": "-14h 20m",
        "tempo_parado1": "-15h 7m",
        "tempo_volta": "74m",
        "tempo_planejado2": "-13h 45m",
        "tempo_parado2": "-14h 59m",
        "sentido": 0
    },
    {
        "id": "21",
        "itinerario": "Viagem de deslocamento",
        "carro": "445",
        "reserva": "",
        "saida_planejada": "05:55",
        "saida": "05:53",
        "diferenca": "-6163:6:0:02",
        "entrada": "6:08",
        "tempo_viagem": "15m",
        "tempo_planejado1": "15m",
        "tempo_parado1": "2m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 0
    },
    {
        "id": "22",
        "itinerario": "Est.Bento/Perim.Norte/Eldorado/Adorado/Iracema/Serrano",
        "carro": "445",
        "reserva": "",
        "saida_planejada": "06:10",
        "saida": "06:10",
        "diferenca": "-6163:6",
        "entrada": "6:58",
        "tempo_viagem": "48m",
        "tempo_planejado1": "50m",
        "tempo_parado1": "1m",
        "tempo_volta": "63m",
        "tempo_planejado2": "65m",
        "tempo_parado2": "2m",
        "sentido": 1
    },
    {
        "id": "23",
        "itinerario": "Serrano/Via Perim.Norte/Est.Bento",
        "carro": "445",
        "reserva": "",
        "saida_planejada": "07:00",
        "saida": "06:59",
        "diferenca": "-6163:6:0:01",
        "entrada": "7:44",
        "tempo_viagem": "45m",
        "tempo_planejado1": "-",
        "tempo_parado1": "-",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 0
    },
    {
        "id": "24",
        "itinerario": "Viagem de deslocamento",
        "carro": "483",
        "reserva": "",
        "saida_planejada": "17:15",
        "saida": "17:16",
        "diferenca": "-6163:5:23:59",
        "entrada": "17:24",
        "tempo_viagem": "8m",
        "tempo_planejado1": "10m",
        "tempo_parado1": "4m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 0
    },
    {
        "id": "25",
        "itinerario": "Ref.Mal.Floriano/Trav.Leopoldina/Serrano",
        "carro": "483",
        "reserva": "",
        "saida_planejada": "17:25",
        "saida": "17:28",
        "diferenca": "-6163:5:23:57",
        "entrada": "18:03",
        "tempo_viagem": "35m",
        "tempo_planejado1": "55m",
        "tempo_parado1": "17m",
        "tempo_volta": "43m",
        "tempo_planejado2": "65m",
        "tempo_parado2": "22m",
        "sentido": 1
    },
    {
        "id": "26",
        "itinerario": "Serrano/Eldorado/Mal.Floriano",
        "carro": "483",
        "reserva": "",
        "saida_planejada": "18:20",
        "saida": "18:20",
        "diferenca": "-6163:6",
        "entrada": "18:54",
        "tempo_viagem": "34m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "1m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 0
    },
    {
        "id": "27",
        "itinerario": "Ref.Mal.Floriano/Eldorado/Serrano",
        "carro": "483",
        "reserva": "",
        "saida_planejada": "18:55",
        "saida": "18:55",
        "diferenca": "-6163:6",
        "entrada": "19:27",
        "tempo_viagem": "32m",
        "tempo_planejado1": "50m",
        "tempo_parado1": "18m",
        "tempo_volta": "66m",
        "tempo_planejado2": "85m",
        "tempo_parado2": "19m",
        "sentido": 1
    },
    {
        "id": "28",
        "itinerario": "Serrano/Andreazza/Marechal Floriano",
        "carro": "483",
        "reserva": "",
        "saida_planejada": "19:45",
        "saida": "19:45",
        "diferenca": "-6163:6",
        "entrada": "20:12",
        "tempo_viagem": "27m",
        "tempo_planejado1": "-14h 45m",
        "tempo_parado1": "-15h 8m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 0
    },
    {
        "id": "29",
        "itinerario": "Viagem de deslocamento",
        "carro": "510",
        "reserva": "",
        "saida_planejada": "05:00",
        "saida": "05:04",
        "diferenca": "-6163:5:23:56",
        "entrada": "5:27",
        "tempo_viagem": "23m",
        "tempo_planejado1": "25m",
        "tempo_parado1": "1m",
        "tempo_volta": "50m",
        "tempo_planejado2": "-14h 20m",
        "tempo_parado2": "-15h 10m",
        "sentido": 1
    },
    {
        "id": "30",
        "itinerario": "Serrano/Andreazza/Marechal Floriano",
        "carro": "510",
        "reserva": "",
        "saida_planejada": "05:25",
        "saida": "05:28",
        "diferenca": "-6163:5:23:57",
        "entrada": "5:55",
        "tempo_viagem": "27m",
        "tempo_planejado1": "-5m",
        "tempo_parado1": "-36m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 0
    },
    {
        "id": "31",
        "itinerario": "Viagem de deslocamento",
        "carro": "605",
        "reserva": "",
        "saida_planejada": "05:20",
        "saida": "05:19",
        "diferenca": "-6163:6:0:01",
        "entrada": "05:28",
        "tempo_viagem": "9m",
        "tempo_planejado1": "10m",
        "tempo_parado1": "2m",
        "tempo_volta": "36m",
        "tempo_planejado2": "5m",
        "tempo_parado2": "-31m",
        "sentido": 0
    },
    {
        "id": "32",
        "itinerario": "Ref.Mal.Floriano/Eldorado/Serrano",
        "carro": "605",
        "reserva": "",
        "saida_planejada": "05:30",
        "saida": "05:30",
        "diferenca": "-6163:6",
        "entrada": "05:59",
        "tempo_viagem": "29m",
        "tempo_planejado1": "30m",
        "tempo_parado1": "2m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "33",
        "itinerario": "Serrano/Andreazza/Marechal Floriano",
        "carro": "605",
        "reserva": "",
        "saida_planejada": "06:00",
        "saida": "06:01",
        "diferenca": "-6163:5:23:59",
        "entrada": "06:27",
        "tempo_viagem": "26m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "3m",
        "tempo_volta": "55m",
        "tempo_planejado2": "65m",
        "tempo_parado2": "10m",
        "sentido": 0
    },
    {
        "id": "34",
        "itinerario": "Ref.Mal.Floriano/Eldorado/Serrano",
        "carro": "605",
        "reserva": "",
        "saida_planejada": "06:35",
        "saida": "06:30",
        "diferenca": "-6163:6:0:05",
        "entrada": "7:08",
        "tempo_viagem": "38m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "3m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "35",
        "itinerario": "Serrano/Andreazza/Marechal Floriano",
        "carro": "605",
        "reserva": "",
        "saida_planejada": "07:10",
        "saida": "07:11",
        "diferenca": "-6163:5:23:59",
        "entrada": "7:46",
        "tempo_viagem": "35m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "1m",
        "tempo_volta": "73m",
        "tempo_planejado2": "70m",
        "tempo_parado2": "-3m",
        "sentido": 0
    },
    {
        "id": "36",
        "itinerario": "Ref.Mal.Floriano/Eldorado/Serrano",
        "carro": "605",
        "reserva": "",
        "saida_planejada": "07:45",
        "saida": "07:47",
        "diferenca": "-6163:5:23:58",
        "entrada": "8:17",
        "tempo_viagem": "30m",
        "tempo_planejado1": "45m",
        "tempo_parado1": "14m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "37",
        "itinerario": "Serrano/Andreazza/Marechal Floriano",
        "carro": "605",
        "reserva": "",
        "saida_planejada": "08:30",
        "saida": "08:31",
        "diferenca": "-6163:5:23:59",
        "entrada": "9:06",
        "tempo_viagem": "35m",
        "tempo_planejado1": "2h 40m",
        "tempo_parado1": "2h 6m",
        "tempo_volta": "65m",
        "tempo_planejado2": "3h 25m",
        "tempo_parado2": "2h 20m",
        "sentido": 0
    },
    {
        "id": "38",
        "itinerario": "Ref.Mal.Floriano/Eldorado/Serrano",
        "carro": "605",
        "reserva": "810",
        "saida_planejada": "11:10",
        "saida": "11:12",
        "diferenca": "-6163:5:23:58",
        "entrada": "11:47",
        "tempo_viagem": "35m",
        "tempo_planejado1": "45m",
        "tempo_parado1": "9m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "39",
        "itinerario": "Serrano/Andreazza/Marechal Floriano",
        "carro": "605",
        "reserva": "810",
        "saida_planejada": "11:55",
        "saida": "11:56",
        "diferenca": "-6163:5:23:59",
        "entrada": "12:31",
        "tempo_viagem": "35m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "1m",
        "tempo_volta": "70m",
        "tempo_planejado2": "80m",
        "tempo_parado2": "10m",
        "sentido": 0
    },
    {
        "id": "40",
        "itinerario": "Ref.Mal.Floriano/Trav.Leopoldina/Serrano",
        "carro": "605",
        "reserva": "810",
        "saida_planejada": "12:30",
        "saida": "12:32",
        "diferenca": "-6163:5:23:58",
        "entrada": "13:05",
        "tempo_viagem": "33m",
        "tempo_planejado1": "40m",
        "tempo_parado1": "5m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "41",
        "itinerario": "Serrano/Eldorado/Mal.Floriano",
        "carro": "605",
        "reserva": "810",
        "saida_planejada": "13:10",
        "saida": "13:10",
        "diferenca": "-6163:6",
        "entrada": "13:49",
        "tempo_viagem": "39m",
        "tempo_planejado1": "3h 30m",
        "tempo_parado1": "3h",
        "tempo_volta": "72m",
        "tempo_planejado2": "4h 10m",
        "tempo_parado2": "2h 58m",
        "sentido": 0
    },
    {
        "id": "42",
        "itinerario": "Ref.Mal.Floriano/Trav.Leopoldina/Serrano",
        "carro": "605",
        "reserva": "",
        "saida_planejada": "16:40",
        "saida": "16:49",
        "diferenca": "-6163:5:23:51",
        "entrada": "17:21",
        "tempo_viagem": "32m",
        "tempo_planejado1": "45m",
        "tempo_parado1": "5m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "43",
        "itinerario": "Serrano/Eldorado/Mal.Floriano",
        "carro": "605",
        "reserva": "",
        "saida_planejada": "17:25",
        "saida": "17:26",
        "diferenca": "-6163:5:23:59",
        "entrada": "18:14",
        "tempo_viagem": "48m",
        "tempo_planejado1": "50m",
        "tempo_parado1": "4m",
        "tempo_volta": "80m",
        "tempo_planejado2": "95m",
        "tempo_parado2": "15m",
        "sentido": 0
    },
    {
        "id": "44",
        "itinerario": "Ref.Mal.Floriano/Eldorado/Serrano",
        "carro": "605",
        "reserva": "",
        "saida_planejada": "18:15",
        "saida": "18:18",
        "diferenca": "-6163:5:23:57",
        "entrada": "18:59",
        "tempo_viagem": "41m",
        "tempo_planejado1": "45m",
        "tempo_parado1": "6m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "45",
        "itinerario": "Serrano/Andreazza/Marechal Floriano",
        "carro": "605",
        "reserva": "",
        "saida_planejada": "19:00",
        "saida": "19:05",
        "diferenca": "-6163:5:23:55",
        "entrada": "19:32",
        "tempo_viagem": "27m",
        "tempo_planejado1": "-",
        "tempo_parado1": "-",
        "tempo_volta": "68m",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 0
    },
    {
        "id": "46",
        "itinerario": "Viagem de deslocamento",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "05:20",
        "saida": "05:31",
        "diferenca": "-6163:5:23:49",
        "entrada": "5:41",
        "tempo_viagem": "10m",
        "tempo_planejado1": "20m",
        "tempo_parado1": "2m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "47",
        "itinerario": "Ref.Mal.Floriano/Trav.Leopoldina/Serrano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "05:40",
        "saida": "05:43",
        "diferenca": "-6163:5:23:57",
        "entrada": "6:09",
        "tempo_viagem": "26m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "7m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "48",
        "itinerario": "Serrano/Eldorado/Mal.Floriano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "06:15",
        "saida": "06:16",
        "diferenca": "-6163:5:23:59",
        "entrada": "6:47",
        "tempo_viagem": "31m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "2m",
        "tempo_volta": "57m",
        "tempo_planejado2": "70m",
        "tempo_parado2": "13m",
        "sentido": 0
    },
    {
        "id": "49",
        "itinerario": "Ref.Mal.Floriano/Trav.Leopoldina/Serrano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "06:50",
        "saida": "06:49",
        "diferenca": "-6163:6:0:01",
        "entrada": "7:19",
        "tempo_viagem": "30m",
        "tempo_planejado1": "40m",
        "tempo_parado1": "12m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "50",
        "itinerario": "Serrano/Eldorado/Mal.Floriano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "07:30",
        "saida": "07:31",
        "diferenca": "-6163:5:23:59",
        "entrada": "8:14",
        "tempo_viagem": "43m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "1m",
        "tempo_volta": "73m",
        "tempo_planejado2": "75m",
        "tempo_parado2": "2m",
        "sentido": 0
    },
    {
        "id": "51",
        "itinerario": "Ref.Mal.Floriano/Trav.Leopoldina/Serrano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "08:05",
        "saida": "08:15",
        "diferenca": "-6163:5:23:50",
        "entrada": "8:44",
        "tempo_viagem": "29m",
        "tempo_planejado1": "55m",
        "tempo_parado1": "16m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "52",
        "itinerario": "Serrano/Eldorado/Mal.Floriano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "09:00",
        "saida": "09:00",
        "diferenca": "-6163:6",
        "entrada": "9:32",
        "tempo_viagem": "32m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "1m",
        "tempo_volta": "61m",
        "tempo_planejado2": "90m",
        "tempo_parado2": "29m",
        "sentido": 0
    },
    {
        "id": "53",
        "itinerario": "Ref.Mal.Floriano/Trav.Leopoldina/Serrano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "09:35",
        "saida": "09:33",
        "diferenca": "-6163:6:0:02",
        "entrada": "10:02",
        "tempo_viagem": "29m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "9m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "54",
        "itinerario": "Serrano/Eldorado/Mal.Floriano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "10:10",
        "saida": "10:11",
        "diferenca": "-6163:5:23:59",
        "entrada": "10:44",
        "tempo_viagem": "33m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "2m",
        "tempo_volta": "62m",
        "tempo_planejado2": "70m",
        "tempo_parado2": "8m",
        "sentido": 0
    },
    {
        "id": "55",
        "itinerario": "Ref.Mal.Floriano/Trav.Leopoldina/Serrano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "10:45",
        "saida": "10:46",
        "diferenca": "-6163:5:23:59",
        "entrada": "11:19",
        "tempo_viagem": "33m",
        "tempo_planejado1": "40m",
        "tempo_parado1": "6m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "56",
        "itinerario": "Serrano/Eldorado/Mal.Floriano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "11:25",
        "saida": "11:25",
        "diferenca": "-6163:6",
        "entrada": "11:58",
        "tempo_viagem": "33m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "2m",
        "tempo_volta": "66m",
        "tempo_planejado2": "75m",
        "tempo_parado2": "9m",
        "sentido": 0
    },
    {
        "id": "57",
        "itinerario": "Ref.Mal.Floriano/Eldorado/Serrano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "12:00",
        "saida": "12:00",
        "diferenca": "-6163:6",
        "entrada": "12:35",
        "tempo_viagem": "35m",
        "tempo_planejado1": "50m",
        "tempo_parado1": "16m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "58",
        "itinerario": "Serrano/Andreazza/Marechal Floriano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "12:50",
        "saida": "12:51",
        "diferenca": "-6163:5:23:59",
        "entrada": "13:25",
        "tempo_viagem": "34m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "1m",
        "tempo_volta": "69m",
        "tempo_planejado2": "85m",
        "tempo_parado2": "16m",
        "sentido": 0
    },
    {
        "id": "59",
        "itinerario": "Ref.Mal.Floriano/Trav.Leopoldina/Serrano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "13:25",
        "saida": "13:26",
        "diferenca": "-6163:5:23:59",
        "entrada": "13:54",
        "tempo_viagem": "28m",
        "tempo_planejado1": "45m",
        "tempo_parado1": "16m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "60",
        "itinerario": "Serrano/Eldorado/Mal.Floriano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "14:10",
        "saida": "14:10",
        "diferenca": "-6163:6",
        "entrada": "14:46",
        "tempo_viagem": "36m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "2m",
        "tempo_volta": "64m",
        "tempo_planejado2": "80m",
        "tempo_parado2": "16m",
        "sentido": 0
    },
    {
        "id": "61",
        "itinerario": "Ref.Mal.Floriano/Trav.Leopoldina/Serrano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "14:45",
        "saida": "14:48",
        "diferenca": "-6163:5:23:57",
        "entrada": "15:18",
        "tempo_viagem": "30m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "1m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "62",
        "itinerario": "Serrano/Eldorado/Mal.Floriano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "15:20",
        "saida": "15:19",
        "diferenca": "-6163:6:0:01",
        "entrada": "15:49",
        "tempo_viagem": "30m",
        "tempo_planejado1": "30m",
        "tempo_parado1": "2m",
        "tempo_volta": "60m",
        "tempo_planejado2": "65m",
        "tempo_parado2": "5m",
        "sentido": 0
    },
    {
        "id": "63",
        "itinerario": "Ref.Mal.Floriano/Trav.Leopoldina/Serrano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "15:50",
        "saida": "15:51",
        "diferenca": "-6163:5:23:59",
        "entrada": "16:24",
        "tempo_viagem": "33m",
        "tempo_planejado1": "40m",
        "tempo_parado1": "6m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "64",
        "itinerario": "Serrano/Eldorado/Mal.Floriano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "16:30",
        "saida": "16:30",
        "diferenca": "-6163:6",
        "entrada": "17:00",
        "tempo_viagem": "30m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "3m",
        "tempo_volta": "63m",
        "tempo_planejado2": "75m",
        "tempo_parado2": "12m",
        "sentido": 0
    },
    {
        "id": "65",
        "itinerario": "Ref.Mal.Floriano/Eldorado/Serrano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "17:05",
        "saida": "17:03",
        "diferenca": "-6163:6:0:02",
        "entrada": "17:45",
        "tempo_viagem": "42m",
        "tempo_planejado1": "50m",
        "tempo_parado1": "10m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "66",
        "itinerario": "Serrano/Andreazza/Marechal Floriano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "17:55",
        "saida": "17:55",
        "diferenca": "-6163:6",
        "entrada": "18:33",
        "tempo_viagem": "38m",
        "tempo_planejado1": "40m",
        "tempo_parado1": "1m",
        "tempo_volta": "80m",
        "tempo_planejado2": "90m",
        "tempo_parado2": "10m",
        "sentido": 0
    },
    {
        "id": "67",
        "itinerario": "Ref.Mal.Floriano/Trav.Leopoldina/Serrano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "18:35",
        "saida": "18:34",
        "diferenca": "-6163:6:0:01",
        "entrada": "19:08",
        "tempo_viagem": "34m",
        "tempo_planejado1": "55m",
        "tempo_parado1": "18m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "68",
        "itinerario": "Serrano/Eldorado/Mal.Floriano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "19:30",
        "saida": "19:26",
        "diferenca": "-6163:6:0:04",
        "entrada": "19:57",
        "tempo_viagem": "31m",
        "tempo_planejado1": "30m",
        "tempo_parado1": "1m",
        "tempo_volta": "65m",
        "tempo_planejado2": "85m",
        "tempo_parado2": "20m",
        "sentido": 0
    },
    {
        "id": "69",
        "itinerario": "Ref.Mal.Floriano/Eldorado/Serrano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "20:00",
        "saida": "19:58",
        "diferenca": "-6163:6:0:02",
        "entrada": "20:29",
        "tempo_viagem": "31m",
        "tempo_planejado1": "30m",
        "tempo_parado1": "1m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "70",
        "itinerario": "Serrano/Andreazza/Marechal Floriano",
        "carro": "622",
        "reserva": "",
        "saida_planejada": "20:30",
        "saida": "20:30",
        "diferenca": "-6163:6",
        "entrada": "20:52",
        "tempo_viagem": "22m",
        "tempo_planejado1": "-",
        "tempo_parado1": "-",
        "tempo_volta": "53m",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 0
    },
    {
        "id": "71",
        "itinerario": "Viagem de deslocamento",
        "carro": "806",
        "reserva": "",
        "saida_planejada": "05:30",
        "saida": "05:36",
        "diferenca": "-6163:5:23:54",
        "entrada": "05:45",
        "tempo_viagem": "9m",
        "tempo_planejado1": "20m",
        "tempo_parado1": "6m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "72",
        "itinerario": "Ref.Mal.Floriano/Eldorado/Serrano",
        "carro": "806",
        "reserva": "",
        "saida_planejada": "05:50",
        "saida": "05:51",
        "diferenca": "-6163:5:23:59",
        "entrada": "6:26",
        "tempo_viagem": "35m",
        "tempo_planejado1": "40m",
        "tempo_parado1": "5m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "73",
        "itinerario": "Serrano/Andreazza/Marechal Floriano",
        "carro": "806",
        "reserva": "",
        "saida_planejada": "06:30",
        "saida": "06:31",
        "diferenca": "-6163:5:23:59",
        "entrada": "7:07",
        "tempo_viagem": "36m",
        "tempo_planejado1": "40m",
        "tempo_parado1": "2m",
        "tempo_volta": "71m",
        "tempo_planejado2": "80m",
        "tempo_parado2": "9m",
        "sentido": 0
    },
    {
        "id": "74",
        "itinerario": "Ref.Mal.Floriano/Eldorado/Serrano",
        "carro": "806",
        "reserva": "",
        "saida_planejada": "07:10",
        "saida": "07:09",
        "diferenca": "-6163:6:0:01",
        "entrada": "7:44",
        "tempo_viagem": "35m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "2m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "75",
        "itinerario": "Serrano/Andreazza/Marechal Floriano",
        "carro": "806",
        "reserva": "",
        "saida_planejada": "07:45",
        "saida": "07:46",
        "diferenca": "-6163:5:23:59",
        "entrada": "8:23",
        "tempo_viagem": "37m",
        "tempo_planejado1": "-1h 50m",
        "tempo_parado1": "-",
        "tempo_volta": "72m",
        "tempo_planejado2": "-1h 15m",
        "tempo_parado2": "-2h 27m",
        "sentido": 0
    },
    {
        "id": "76",
        "itinerario": "Viagem de deslocamento",
        "carro": "810",
        "reserva": "",
        "saida_planejada": "05:55",
        "saida": "-",
        "diferenca": "-",
        "entrada": "-",
        "tempo_viagem": "-",
        "tempo_planejado1": "15m",
        "tempo_parado1": "-",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "77",
        "itinerario": "Ref.Mal.Floriano/Trav.Leopoldina/Serrano",
        "carro": "810",
        "reserva": "",
        "saida_planejada": "06:10",
        "saida": "06:14",
        "diferenca": "-6163:5:23:56",
        "entrada": "6:45",
        "tempo_viagem": "31m",
        "tempo_planejado1": "40m",
        "tempo_parado1": "5m",
        "tempo_volta": "-",
        "tempo_planejado2": "55m",
        "tempo_parado2": "-",
        "sentido": 1
    },
    {
        "id": "78",
        "itinerario": "Serrano/Eldorado/Mal.Floriano",
        "carro": "810",
        "reserva": "",
        "saida_planejada": "06:50",
        "saida": "06:50",
        "diferenca": "-6163:6",
        "entrada": "7:28",
        "tempo_viagem": "38m",
        "tempo_planejado1": "35m",
        "tempo_parado1": "1m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 0
    },
    {
        "id": "79",
        "itinerario": "Ref.Mal.Floriano/Trav.Leopoldina/Serrano",
        "carro": "810",
        "reserva": "",
        "saida_planejada": "07:25",
        "saida": "07:29",
        "diferenca": "-6163:5:23:56",
        "entrada": "8:01",
        "tempo_viagem": "32m",
        "tempo_planejado1": "40m",
        "tempo_parado1": "4m",
        "tempo_volta": "70m",
        "tempo_planejado2": "75m",
        "tempo_parado2": "5m",
        "sentido": 1
    },
    {
        "id": "80",
        "itinerario": "Serrano/Eldorado/Mal.Floriano",
        "carro": "810",
        "reserva": "",
        "saida_planejada": "08:05",
        "saida": "08:05",
        "diferenca": "-6163:6",
        "entrada": "8:38",
        "tempo_viagem": "33m",
        "tempo_planejado1": "8h 5m",
        "tempo_parado1": "7h 36m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 0
    },
    {
        "id": "81",
        "itinerario": "Ref.Mal.Floriano/Eldorado/Serrano",
        "carro": "810",
        "reserva": "",
        "saida_planejada": "16:10",
        "saida": "16:14",
        "diferenca": "-6163:5:23:56",
        "entrada": "16:52",
        "tempo_viagem": "38m",
        "tempo_planejado1": "55m",
        "tempo_parado1": "14m",
        "tempo_volta": "71m",
        "tempo_planejado2": "9h 0m",
        "tempo_parado2": "7h 49m",
        "sentido": 1
    },
    {
        "id": "82",
        "itinerario": "Serrano/Andreazza/Marechal Floriano",
        "carro": "810",
        "reserva": "",
        "saida_planejada": "17:05",
        "saida": "17:06",
        "diferenca": "-6163:5:23:59",
        "entrada": "17:51",
        "tempo_viagem": "45m",
        "tempo_planejado1": "40m",
        "tempo_parado1": "4m",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 0
    },
    {
        "id": "83",
        "itinerario": "Ref.Mal.Floriano/Eldorado/Serrano",
        "carro": "810",
        "reserva": "",
        "saida_planejada": "17:45",
        "saida": "17:55",
        "diferenca": "-6163:5:23:50",
        "entrada": "18:37",
        "tempo_viagem": "42m",
        "tempo_planejado1": "50m",
        "tempo_parado1": "1m",
        "tempo_volta": "87m",
        "tempo_planejado2": "90m",
        "tempo_parado2": "3m",
        "sentido": 1
    },
    {
        "id": "84",
        "itinerario": "Serrano/Andreazza/Marechal Floriano",
        "carro": "810",
        "reserva": "",
        "saida_planejada": "18:35",
        "saida": "18:38",
        "diferenca": "-6163:5:23:57",
        "entrada": "19:10",
        "tempo_viagem": "32m",
        "tempo_planejado1": "-",
        "tempo_parado1": "-",
        "tempo_volta": "-",
        "tempo_planejado2": "-",
        "tempo_parado2": "-",
        "sentido": 0
    }
]

data = dataFilter(data)

var svgWidth = 1300,
    svgHeight = 1000;

var margin = { top: 45, right: 40, bottom: 80, left: 50 };
var width = svgWidth - margin.left - margin.right;
var height = svgHeight / 4 - margin.top - margin.bottom;
var points = [
    [],
    [],
    [],
    []
];

var svg = d3.select("svg")
    .attr("width", svgWidth)
    .attr("height", svgHeight)
    .attr("class", "svg-container");

window.addEventListener('DOMContentLoaded', (event) => {
    var newData = dataFilterPaths(data)
    var newPoints = dataExitsEntries(newData)
    populatePoints(newPoints);
    drawChart();
    drawLabels();
});

var cars = d3.groups(data, d => d.carro);
var carsName = cars.map(d => d[0]);

var color = d3.scaleOrdinal().domain(carsName).range(['#E41A10', '#FFD000', '#059451', '#984EA3', '#FF7F00', '#999999', '#A69620', '#377FFF', '#F781BF', '#9FDFD9']);

// var color = d3.scaleOrdinal().domain(carsName).range(['#ff75e8', '#0dfeda', '#2dbf4b', '#4b35e8', '#8a6cbf', '#f73a78', '#af8f67', '#e99999', '#e4e432', '#e5511a', '#E41A10', '#712E0B']);

function drawChart() {
    const groups = 4;
    const groupHeight = svgHeight / 4;
    const domains = [
        [0, 360],
        [360, 720],
        [720, 1080],
        [1080, 1439.99],
    ];

    const positions = [0, groupHeight, groupHeight * 2, groupHeight * 3];
    for (let index = 0; index < groups; index++) {
        var sumstat = d3.groups(points[index], d => d.carro, d => d.path);

        const g = svg.append("g")
            .attr("transform", "translate(" + margin.left + "," + positions[index] + ")")
            .attr("class", `chart${index + 1}`)

        const gChart = g.append("g")
            .attr("transform", "translate(" + 0 + "," + margin.top + ")")

        const gTimeLine = g.append("g")
            .attr("transform", "translate(" + 0 + "," + 100 + ")")

        var x1 = d3.scaleLinear()
            .domain(domains[index])
            .rangeRound([0, width]);

        var x2 = d3.scaleLinear()
            .domain(domains[index])
            .rangeRound([0, width]);

        var x3 = d3.scaleLinear()
            .domain(domains[index])
            .rangeRound([0, width]);

        var y1 = d3.scaleLinear()
            .domain(d3.extent(data, (d) => d.sentido))
            .range([height, 0])

        var y2 = d3.scaleLinear()
            .domain(d3.extent(data, (d) => d.sentido))
            .range([height, 0]);

        //axies generator
        var x1Generator = d3.axisBottom(x1).ticks(36).tickSize(0)
        var x2Generator = d3.axisTop(x2).ticks(36).tickSize(0)
        var x3Generator = d3.axisTop(x3).ticks(20).tickSize(10)

        var y1Generator = d3.axisLeft(y1).ticks(1).tickSize(10)
        var y2Generator = d3.axisRight(y2).ticks(1).tickSize(1)

        let xTickLabels = e => `${Math.floor(e / 60)}:${(e % 60).toString().padStart(2, '0')}`;
        x3Generator.tickFormat((d) => xTickLabels(d));

        //y axis tick labels
        let yTickLabels = ["A", "B"]
        y1Generator.tickFormat((d, i) => yTickLabels[i])

        gChart.append("g")
            .attr("transform", "translate(0," + height + ")")
            .attr("class", "xAxis1")
            .attr('stroke-width', 3)
            .call(x1Generator)

        gChart.append("g")
            .attr("transform", "translate(0,0)")
            .attr("class", "xAxis2")
            .attr('stroke-width', 3)
            .call(x2Generator)

        gChart.append("g")
            .attr("transform", "translate(0,0)")
            .attr("class", "yAxis1")
            .attr('stroke-width', 3)
            .call(y1Generator)

        gChart.append("g")
            .attr("transform", "translate(" + width + ", 0)")
            .attr("class", "yAxis2")
            .attr('stroke-width', 3)
            .call(y2Generator)

        gTimeLine.append("g")
            .attr("transform", "translate(0," + height + ")")
            .attr("class", "xAxis3")
            .attr('stroke-width', 3)
            .call(x3Generator)

        gTimeLine.selectAll(".xAxis3 text")
            .attr("color", "#262D36")
            .attr("font-size", 14)

        gChart.selectAll(".xAxis1 text")
            .attr("display", "none")

        gChart.selectAll(".xAxis1 .tick")
            .attr("stroke-width", "0")

        gChart.selectAll(".xAxis2 text")
            .attr("display", "none")

        gChart.selectAll(".xAxis2 .tick")
            .attr("stroke-width", "0")

        gChart.selectAll(".yAxis1 text")
            .attr("color", "#262D36")
            .attr("font-size", 16)
            .attr("font-weight", 700)

        gChart.selectAll(".yAxis2 text")
            .attr("display", "none")

        drawTicks(gChart, index, x1)

        //LINHAS
        if (points[index].length > 0) {
            drawPaths(gChart, sumstat, x1)
            drawTriangles(gChart, color, sumstat)
        }
    }
}

function drawPaths(group, paths, x) {
    paths.forEach(car => {
        const line = d3.line()
            .x((d) => {
                d = drawExitsAndEntries(d)
                return x(d.xpoint)
            })
            .y((d) => d.ypoint)
            .curve(d3.curveCatmullRom.alpha(0.7))
            .defined(d => d.xpoint != 0)

        const lines = group.selectAll("lines")
            .data(car[1])
            .enter()
            .append("g");

        lines.append("path") //.style("stroke-dasharray", ("3, 3"))
            .attr('fill', 'none')
            .attr("stroke-linejoin", "round")
            .attr("stroke-linecap", "round")
            .attr('stroke', d => color(car[0]))
            .attr('stroke-width', 2.2)
            .attr("d", (d) => line(d[1]))
            .attr("class", d => `car${car[0]}`)
            .each(function(d, i, a) {
                var path = d3.select(this);
                d[1].forEach(point => {
                    appendTriangles(path, point)
                })
            });
    })
}

function appendTriangles(path, data) {
    if (data.position === 1) {
        path.attr("marker-start", `url(#triangle${data.carro})`)
    } else if (data.position === 3) {
        path.attr("marker-end", `url(#triangle${data.carro})`)
    } else {
        return
    }
}

function drawTriangles(group, color, data) {
    const trinagles = group.selectAll("triangles")
        .data(data)
        .enter()

    trinagles.append("svg:defs").append("svg:marker")
        .attr("id", (d) => `triangle${d[0]}`)
        .attr("refX", 6)
        .attr("refY", 6)
        .attr("markerWidth", 30)
        .attr("markerHeight", 30)
        .attr("markerUnits", "userSpaceOnUse")
        .attr("orient", "auto")
        .append("path")
        .attr("d", "M 0 0 12 6 0 12 3 6")
        .style("fill", (d) => color(d[0]))
}

function drawLabels() {
    const gLabels = svg.append("g")
        .attr("transform", "translate(" + margin.left + "," + 10 + ")")

    var x = d3.scaleLinear()
        .domain([0, cars.length])
        .range([0, width]);

    var xLabelsGenerator = d3.axisBottom(x).tickSize(0)

    gLabels.append("g")
        .attr("transform", "translate(" + 0 + "," + 25 + ")")
        .attr("class", "xLabels")
        .attr('stroke-width', 3)
        .call(xLabelsGenerator)

    gLabels.selectAll(".xLabels text")
        .attr("display", "none")

    gLabels.selectAll(".xLabels path")
        .attr("display", "none")

    const labels = gLabels.selectAll("rect")
        .data(carsName)
        .enter()
        .append("g")

    labels.append("rect")
        .attr('height', 20)
        .attr('width', 60)
        .attr("rx", 6)
        .attr("ry", 6)
        .style("fill", d => color(d))
        .attr('transform', (d, i) => "translate(" + x(i) + "," + 0 + ")");

    labels.append("text")
        .attr("x", (d, i) => x(i))
        .attr("dy", 15)
        .attr("dx", 7)
        .style("fill", "#FFF")
        .attr("font-size", 14)
        .attr("font-weight", 400)
        .text(d => d);
}

function getNewHeightBA(height, width, a, b) {
    return height - (height * (a - width) / (a - b))
}

function getNewHeightAB(height, width, a, b) {
    return (height * (a - width) / (a - b))
}

function drawExitsAndEntries(data) {
    if (data.position != 2) {
        if (data.ypoint === 0) {
            data.ypoint -= 10;
        } else {
            data.ypoint += 10;
        }
    }
    return data
}

function dataFilter(data) {
    data = data.filter(point => (point.itinerario !== 'Viagem de deslocamento') && (point.itinerario !== 'Viagem de Deslocamento entre Terminais') && (point.saida !== '-'))

    return data.map((point) => {
        if (point.km === "\r" || point.km === "") {
            point.km = 0
        }
        if (!point.entrada) {
            return {
                ...point,
                saida: parseInt(point.saida.toString()) * 60 + parseInt(point.saida.toString().slice(-2)),
                entrada: (parseFloat(point.saida.toString()) * 60 + parseInt(point.saida.toString().slice(-2))) + parseInt(point.km) / 18 * 60,
                path: 1
            }

        } else {
            return {
                ...point,
                saida: parseInt(point.saida.toString()) * 60 + parseInt(point.saida.toString().slice(-2)),
                entrada: parseInt(point.entrada.toString()) * 60 + parseInt(point.entrada.toString().slice(-2)),
                path: 1
            }
        }
    })
}

function dataFilterPaths(data) {
    var cars = d3.groups(data, d => d.carro);
    var newData = []

    cars.forEach(car => {
        car[1].forEach((point, index) => {
            var previous = findPreviousPoint(car[1], index)
            var newPoint = {}
            newPath = point.path

            if (previous) {
                if (point.saida - car[1][previous].entrada > 40) {
                    newPath = car[1][previous].path + 1;
                    newPoint = {...point, path: newPath }
                    point.path = newPath;
                } else {
                    newPath = car[1][previous].path
                    newPoint = {...point, path: newPath }
                    point.path = newPath;
                }
            } else {
                newPoint = {...point, path: newPath }
            }
            newData.push(newPoint)
        })
    })

    return newData
}

function dataFillPaths(points) {
    var carros = d3.groups(points, d => d.carro)
    var newPoints = []

    carros.forEach(car => {
        var newPath = 1
        car[1].forEach(point => {
            if (point.path != 1) {
                newPath = point.path
            }
            newPoints.push({...point, path: newPath })
        })
    })
    return newPoints
}

function dataExitsEntries(data) {
    var carros = d3.groups(data, d => d.carro, d => d.path);
    var newPoints = []
    carros.forEach(car => {
        car[1].forEach((point, i) => {
            for (let j = 0; j < point[1].length; j++) {
                const element = point[1][j];
                if (point[1].length != 1) {
                    if (j === 0) {
                        element.position_saida = 1
                        element.position_entrada = 2
                    } else if (j === point[1].length - 1) {
                        point[1][point[1].length - 1].position_saida = 2
                        point[1][point[1].length - 1].position_entrada = 3
                    } else {
                        element.position_saida = 2
                        element.position_entrada = 2
                    }
                } else {
                    element.position_saida = 1
                    element.position_entrada = 3
                }
                newPoints.push({...element })
            }
        })
    })

    return newPoints
}

function findNextPoint(array, index) {
    if (array[index + 1]) {
        return array.indexOf(array[index + 1])
    } else {
        return false
    }
}

function findPreviousPoint(array, index) {
    if (array[index - 1]) {
        return array.indexOf(array[index - 1])
    } else {
        return false
    }
}

function populateTicks() {
    var tickHours = [],
        tick10Min = [],
        tick5Min = []

    var tickHoursCount = 60;
    for (let i = 1; i <= 4; i++) {
        tickHours.push([])
        for (let j = 0; j < 6; j++) {
            tickHours[i - 1].push(tickHoursCount);
            tickHoursCount += 60;
        }
    }

    var tick10MinCount = 10;
    for (let i = 1; i <= 4; i++) {
        tick10Min.push([])
        for (let j = 0; j < 36; j++) {
            tick10Min[i - 1].push(tick10MinCount);
            tick10MinCount += 10;
        }
    }

    var tick5MinCount = 5;
    for (let i = 1; i <= 4; i++) {
        tick5Min.push([])
        for (let j = 0; j < 36; j++) {
            tick5Min[i - 1].push(tick5MinCount);
            tick5MinCount += 10;
        }
    }

    return { tickHours, tick10Min, tick5Min }
}

function drawTicks(group, index, x) {
    var {
        tickHours,
        tick10Min,
        tick5Min
    } = populateTicks()

    const gridHours = group.selectAll("lines")
        .data(tickHours[index])
        .join("g")

    gridHours.append("line")
        .attr("x1", (d) => x(d))
        .attr("x2", d => x(d))
        .attr("y1", height)
        .attr("y2", 0)
        .attr("stroke-opacity", 0.7)
        .attr("stroke", "currentColor")
        .attr("stroke-width", 2);

    const grid10Min = group.selectAll("lines")
        .data(tick10Min[index])
        .join("g")

    grid10Min.append("line")
        .attr("x1", (d) => x(d))
        .attr("x2", d => x(d))
        .attr("y1", height)
        .attr("y2", 0)
        .attr("stroke-opacity", 0.35)
        .attr("stroke", "currentColor")
        .attr("stroke-width", 2);

    const grid5Min = group.selectAll("lines")
        .data(tick5Min[index])
        .join("g")

    grid5Min.append("line")
        .attr("x1", (d) => x(d))
        .attr("x2", d => x(d))
        .attr("y1", 10)
        .attr("y2", 0)
        .attr("stroke-opacity", 0.2)
        .attr("stroke", "currentColor")
        .attr("stroke-width", 2);

    grid5Min.append("line")
        .attr("x1", (d) => x(d))
        .attr("x2", d => x(d))
        .attr("y1", height)
        .attr("y2", height - 10)
        .attr("stroke-opacity", 0.2)
        .attr("stroke", "currentColor")
        .attr("stroke-width", 2);
}

function populatePoints(data) {
    for (let i = 0; i < data.length; i++) {
        const element = data[i];
        if (element.saida > 0 && element.saida <= 360) {
            if (element.sentido === 1) {
                points[0].push({
                    carro: element.carro,
                    xpoint: element.saida,
                    ypoint: height,
                    position: element.position_saida,
                    path: element.path
                })
                if (element.entrada > 360) {
                    let newHeight = getNewHeightAB(height, 360, element.entrada, element.saida)
                    points[0].push({
                        carro: element.carro,
                        xpoint: 360,
                        ypoint: newHeight,
                        position: element.position_entrada,
                        path: element.path
                    })
                    points[1].push({
                        carro: element.carro,
                        xpoint: 360,
                        ypoint: newHeight,
                        position: 2,
                        path: element.path
                    }, {
                        carro: element.carro,
                        xpoint: element.entrada,
                        ypoint: 0,
                        position: element.position_entrada,
                        path: element.path
                    })
                } else {
                    points[0].push({
                        carro: element.carro,
                        xpoint: element.entrada,
                        ypoint: 0,
                        position: element.position_entrada,
                        path: element.path
                    })
                }

            } else if (element.sentido === 0) {
                points[0].push({
                    carro: element.carro,
                    xpoint: element.saida,
                    ypoint: 0,
                    position: element.position_saida,
                    path: element.path
                })
                if (element.entrada > 360) {
                    let newHeight = getNewHeightBA(height, 360, element.entrada, element.saida)
                    points[0].push({
                        carro: element.carro,
                        xpoint: 360,
                        ypoint: newHeight,
                        position: element.position_entrada,
                        path: element.path
                    })
                    points[1].push({
                        carro: element.carro,
                        xpoint: 360,
                        ypoint: newHeight,
                        position: 2,
                        path: element.path
                    }, {
                        carro: element.carro,
                        xpoint: element.entrada,
                        ypoint: height,
                        position: element.position_entrada,
                        path: element.path
                    })
                } else {
                    points[0].push({
                        carro: element.carro,
                        xpoint: element.entrada,
                        ypoint: height,
                        position: element.position_entrada,
                        path: element.path
                    })
                }
            }
        } else if (element.saida >= 360 && element.saida <= 720) {
            if (element.sentido === 1) {
                points[1].push({
                    carro: element.carro,
                    xpoint: element.saida,
                    ypoint: height,
                    position: element.position_saida,
                    path: element.path
                })
                if (element.entrada >= 720) {
                    let newHeight = getNewHeightAB(height, 720, element.entrada, element.saida)
                    points[1].push({
                        carro: element.carro,
                        xpoint: 720,
                        ypoint: newHeight,
                        position: element.position_entrada,
                        path: element.path
                    })
                    points[2].push({
                        carro: element.carro,
                        xpoint: 720,
                        ypoint: newHeight,
                        position: 2,
                        path: element.path
                    }, {
                        carro: element.carro,
                        xpoint: element.entrada,
                        ypoint: 0,
                        position: element.position_entrada,
                        path: element.path
                    })
                } else {
                    points[1].push({
                        carro: element.carro,
                        xpoint: element.entrada,
                        ypoint: 0,
                        position: element.position_entrada,
                        path: element.path
                    })
                }
            } else if (element.sentido === 0) {
                points[1].push({
                    carro: element.carro,
                    xpoint: element.saida,
                    ypoint: 0,
                    position: element.position_saida,
                    path: element.path
                })
                if (element.entrada > 720) {
                    let newHeight = getNewHeightBA(height, 720, element.entrada, element.saida)
                    points[1].push({
                        carro: element.carro,
                        xpoint: 720,
                        ypoint: newHeight,
                        position: element.position_entrada,
                        path: element.path
                    })
                    points[2].push({
                        carro: element.carro,
                        xpoint: 720,
                        ypoint: newHeight,
                        position: 2,
                        path: element.path
                    }, {
                        carro: element.carro,
                        xpoint: element.entrada,
                        ypoint: height,
                        position: element.position_entrada,
                        path: element.path
                    })
                } else {
                    points[1].push({
                        carro: element.carro,
                        xpoint: element.entrada,
                        ypoint: height,
                        position: element.position_entrada,
                        path: element.path
                    })
                }
            }
        } else if (element.saida >= 720 && element.saida <= 1080) {
            if (element.sentido === 1) {
                points[2].push({
                    carro: element.carro,
                    xpoint: element.saida,
                    ypoint: height,
                    position: element.position_saida,
                    path: element.path
                })
                if (element.entrada >= 1080) {
                    let newHeight = getNewHeightAB(height, 1080, element.entrada, element.saida)
                    points[2].push({
                        carro: element.carro,
                        xpoint: 1080,
                        ypoint: newHeight,
                        position: element.position_entrada,
                        path: element.path
                    })
                    points[3].push({
                        carro: element.carro,
                        xpoint: 1080,
                        ypoint: newHeight,
                        position: 2,
                        path: element.path
                    }, {
                        carro: element.carro,
                        xpoint: element.entrada,
                        ypoint: 0,
                        position: element.position_entrada,
                        path: element.path
                    })
                } else {
                    points[2].push({
                        carro: element.carro,
                        xpoint: element.entrada,
                        ypoint: 0,
                        position: element.position_entrada,
                        path: element.path
                    })
                }
            } else if (element.sentido === 0) {
                points[2].push({
                    carro: element.carro,
                    xpoint: element.saida,
                    ypoint: 0,
                    position: element.position_saida,
                    path: element.path
                })
                if (element.entrada > 1080) {
                    let newHeight = getNewHeightBA(height, 1080, element.entrada, element.saida)
                    points[2].push({
                        carro: element.carro,
                        xpoint: 1080,
                        ypoint: newHeight,
                        position: element.position_entrada,
                        path: element.path
                    })
                    points[3].push({
                        carro: element.carro,
                        xpoint: 1080,
                        ypoint: newHeight,
                        position: 2,
                        path: element.path
                    }, {
                        carro: element.carro,
                        xpoint: element.entrada,
                        ypoint: height,
                        position: element.position_entrada,
                        path: element.path
                    })
                } else {
                    points[2].push({
                        carro: element.carro,
                        xpoint: element.entrada,
                        ypoint: height,
                        position: element.position_entrada,
                        path: element.path
                    })
                }
            }
        } else if (element.saida >= 1080 && element.saida <= 1440) {
            if (element.sentido === 1) {
                points[3].push({
                    carro: element.carro,
                    xpoint: element.saida,
                    ypoint: height,
                    position: element.position_saida,
                    path: element.path
                })
                if (element.entrada >= 1440) {
                    let newHeight = getNewHeightAB(height, 1440, element.entrada, element.saida)
                    points[3].push({
                        carro: element.carro,
                        xpoint: 1440,
                        ypoint: newHeight,
                        position: element.position_entrada,
                        path: element.path
                    })
                    points[0].push({
                        carro: element.carro,
                        xpoint: 0.1,
                        ypoint: newHeight,
                        position: 2,
                        path: element.path
                    }, {
                        carro: element.carro,
                        xpoint: element.entrada - 1440,
                        ypoint: 0,
                        position: element.position_entrada,
                        path: element.path
                    })
                } else {
                    points[3].push({
                        carro: element.carro,
                        xpoint: element.entrada,
                        ypoint: 0,
                        position: element.position_entrada,
                        path: element.path
                    })
                }
            } else if (element.sentido === 0) {
                points[3].push({
                    carro: element.carro,
                    xpoint: element.saida,
                    ypoint: 0,
                    position: element.position_saida,
                    path: element.path
                })
                if (element.entrada > 1440) {
                    let newHeight = getNewHeightBA(height, 1440, element.entrada, element.saida)
                    points[3].push({
                        carro: element.carro,
                        xpoint: 1440,
                        ypoint: newHeight,
                        position: element.position_entrada,
                        path: element.path
                    })
                    points[0].push({
                        carro: element.carro,
                        xpoint: 0.1,
                        ypoint: newHeight,
                        position: 2,
                        path: element.path
                    }, {
                        carro: element.carro,
                        xpoint: element.entrada - 1440,
                        ypoint: height,
                        position: element.position_entrada,
                        path: element.path
                    })
                } else {
                    points[3].push({
                        carro: element.carro,
                        xpoint: element.entrada,
                        ypoint: height,
                        position: element.position_entrada,
                        path: element.path
                    })
                }
            }
        }
    }
}